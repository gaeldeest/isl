open Isl_Sigs

module Make (CTX: CTX): BASIC_MAP
  with type t = IslRaw.basic_map
   and type space = IslRaw.space
   and type local_space = IslRaw.local_space
   and type constrnt = IslRaw.constrnt
=
struct
  type t = IslRaw.basic_map
  type space = IslRaw.space
  type local_space = IslRaw.local_space
  type constrnt = IslRaw.constrnt

  module M = IslRaw.BasicMap
               
  let copy = M.copy
  let wrap = Isl_Utils.wrap M.free

  let empty s = wrap @@ M._empty (IslRaw.Space.copy s)
  let universe s = wrap @@ M._universe (IslRaw.Space.copy s)
  let identity s = wrap @@ M._identity (IslRaw.Space.copy s)
  let nat_universe s = wrap @@ M._nat_universe (IslRaw;Space.copy s)
  let add_constraint bm c = wrap @@ M._add_constraint
      (copy bm) (IslRaw.Constraint.copy c)

  let local_space bs = Isl_Utils.wrap IslRaw.LocalSpace.free @@ M._get_local_space bs

  let to_string = print_with ctx isl_printer_print_basic_map      
end
